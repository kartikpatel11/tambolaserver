"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var type_util_1 = require("../../type-util");
var error_util_1 = require("../../error-util");
/**
    Calls `JSON.stringify()` and `JSON.parse()` once.

    Always returns a new object.
*/
function jsonObject() {
    return function (name, mixed) {
        try {
            var str = JSON.stringify(mixed);
            if (typeof str == "string" && str[0] == "{") {
                if (type_util_1.isBigIntNativelySupported() || !type_util_1.isBigInt(mixed)) {
                    return JSON.parse(str);
                }
            }
            throw error_util_1.makeMappingError({
                message: name + " must be JSON Object; received " + type_util_1.toTypeStr(mixed),
                inputName: name,
                actualValue: mixed,
                expected: "JSON Object",
            });
        }
        catch (err) {
            throw error_util_1.makeMappingError({
                message: name + " must be JSON Object; " + err.message,
                inputName: name,
                actualValue: mixed,
                expected: "JSON Object",
            });
        }
    };
}
exports.jsonObject = jsonObject;
//# sourceMappingURL=json-object.js.map