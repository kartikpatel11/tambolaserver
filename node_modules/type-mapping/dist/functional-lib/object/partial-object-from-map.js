"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var mapper_1 = require("../../mapper");
var instance_of_object_1 = require("./instance-of-object");
var operator_1 = require("../operator");
var to_empty_object_1 = require("./to-empty-object");
/**
    Always returns a new object.

    If the input contains additional fields not part
    of the map, they will not be in the new object.

    -----

    All input fields are optional.
    All output fields may be undefined.
*/
function partialObjectFromMap(map) {
    var keys = Object.keys(map);
    if (keys.length == 0) {
        return to_empty_object_1.toEmptyObject();
    }
    var partialMap = {};
    for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {
        var k = keys_1[_i];
        partialMap[k] = operator_1.optional(map[k]);
    }
    return mapper_1.mapper(operator_1.pipe(instance_of_object_1.instanceOfObject(), function (name, mixed) {
        var result = {};
        for (var _i = 0, keys_2 = keys; _i < keys_2.length; _i++) {
            var k = keys_2[_i];
            result[k] = partialMap[k](name + "." + k, mixed[k]);
        }
        return result;
    }));
}
exports.partialObjectFromMap = partialObjectFromMap;
//# sourceMappingURL=partial-object-from-map.js.map