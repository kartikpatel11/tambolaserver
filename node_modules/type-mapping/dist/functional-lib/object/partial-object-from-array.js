"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var mapper_1 = require("../../mapper");
var operator_1 = require("../operator");
var to_empty_object_1 = require("./to-empty-object");
var partial_object_from_map_1 = require("./partial-object-from-map");
/**
    This,
    ```ts
    objectFromArray(
        withName(unsignedInteger(), "foo"),
        withName(string(), "foo")
    );
    ```

    Is the same as,
    ```ts
    objectFromArray(
        withName(or(
            unsignedInteger(),
            string()
        ), "foo")
    );
    ```
*/
function partialObjectFromArray() {
    var arr = [];
    for (var _i = 0; _i < arguments.length; _i++) {
        arr[_i] = arguments[_i];
    }
    if (arr.length == 0) {
        return to_empty_object_1.toEmptyObject();
    }
    var groupedByName = {};
    for (var _a = 0, arr_1 = arr; _a < arr_1.length; _a++) {
        var f = arr_1[_a];
        var name = mapper_1.getNameOrEmptyString(f);
        var mappers = groupedByName[name];
        if (mappers == undefined) {
            mappers = [];
            groupedByName[name] = mappers;
        }
        mappers.push(f);
    }
    var map = {};
    for (var k in groupedByName) {
        var mappers = groupedByName[k];
        if (mappers == undefined) {
            continue;
        }
        map[k] = (mappers.length == 1) ?
            mappers[0] : operator_1.unsafeOr.apply(void 0, mappers);
    }
    return partial_object_from_map_1.partialObjectFromMap(map);
}
exports.partialObjectFromArray = partialObjectFromArray;
//# sourceMappingURL=partial-object-from-array.js.map